<div class="" style="padding:30px;margin-top:20px">
	<h2 class="text-center">Post Sterile Receipts</h2>
</div>
<!-- DocControlQA won't see the scan box -->
<div ng-include src="'partials/scan-input.html'"></div>
<section>
	<ul class="nav nav-tabs margin-bottom" role="tablist">
		<li role="presentation" ng-class="{'active':temp.showTab==='workOrders'}">
			<a class="cursor-pointer" ng-click="temp.showTab='workOrders'">Work Orders</a>
		</li>
		<li role="presentation" ng-class="{'active':temp.showTab==='bitScanItem'}"  ng-if="authUser.UserRole.indexOf('qa')===-1">
			<a class="cursor-pointer" ng-click="temp.showTab='bitScanItem'">BIT Items</a>
		</li>
		<li role="presentation" ng-class="{'active':temp.showTab==='qasScanItem'}"  ng-if="authUser.UserRole.indexOf('wh')===-1">
			<a class="cursor-pointer" ng-click="temp.showTab='qasScanItem'">QA Samples</a>
		</li>
		
	</ul>
<!-- Tab panes -->
<div class="tab-content">
		<h3 class="text-center">Subcon Order:{{workOrders[0].SubConPoRefNo}}</h3>
		<div role="tabpanel" class="tab-pane"  ng-class="{'active':temp.showTab==='workOrders'}" id="workOrders">
			<button type="button" class="btn btn-default pull-right" ng-click="refresh();setFocus('barcode1')">Refresh Scan Count</button>
			  <table class="table padding-top table-striped" >
				  <thead> 
					  <tr> 
						  <!-- <th width="10%"  class="text-center">Status</th>  -->
						  <th width="15%"  class="text-center">Work Order</th> 
						  <th width="15%"  class="text-center">Batch</th> 
						  <th width="15%"  class="text-center">Recv/Plan Qty BIT</th> 
						  <th width="15%"  class="text-center">Recv Qty BIT Incr</th> 
						  <th width="15%"  class="text-center">Recv/Plan Qty QA</th> 
						  <th width="15%"  class="text-center">Recv Qty QA Incr</th> 
					  </tr> 
				  </thead> 
				  <tbody> 
							<tr ng-repeat="(woIdx,order) in workOrders"> 
								<!-- <td class="text-center"  ng-class="{'bg-success':order.lotReleased}">
									<input type="checkbox" ng-model="order.toRelease" style="height:16px;width:20px;" ng-change="checkLotRelease()"
									ng-disabled="order.nPlanSGWQty>order.nRcptSGWQty||order.nPlanSGQQty>order.nRcptSGQQty" ng-if="!order.lotReleased">
									<span ng-if="order.lotReleased">Released</span>
								</td> -->
								<td  class="text-center" ng-class="{'bg-highlight':order.nRcptSGWQtyIncr>0||order.nRcptSGQQtyIncr>0}">{{::order.WorkOrder}}</td>
								<td  class="text-center bold" ng-class="{'bg-highlight':order.nRcptSGWQtyIncr>0||order.nRcptSGQQtyIncr>0,'text-success':order.FullScanCode.length>20,'text-danger':order.FullScanCode.length<=20}">{{::order.batchno}}</td>
								<td  class="text-center" ng-class="{'bg-highlight':order.nRcptSGWQtyIncr>0||order.nRcptSGQQtyIncr>0,'bg-success':order.nPlanSGWQty===order.nRcptSGWQty}">{{order.nRcptSGWQty}} / {{order.nPlanSGWQty}}</td>
								<td  class="text-center" ng-class="{'bg-highlight':order.nRcptSGWQtyIncr>0||order.nRcptSGQQtyIncr>0}">{{order.nRcptSGWQtyIncr||0}}</td>
								<td  class="text-center" ng-class="{'bg-highlight':order.nRcptSGWQtyIncr>0||order.nRcptSGQQtyIncr>0,'bg-success':order.nPlanSGQQty===order.nRcptSGQQty}">{{order.nRcptSGQQty}} / {{order.nPlanSGQQty}}</td>
								<td  class="text-center" ng-class="{'bg-highlight':order.nRcptSGWQtyIncr>0||order.nRcptSGQQtyIncr>0}">{{order.nRcptSGQQtyIncr||0}}</td>
							</tr>
						</tbody> 
						<tfoot>
							<tr> 
								<td  class="text-center" colspan="2">Total:</td>
								<td  class="text-center">{{su.rcptSGWQty}} / {{su.planSGWQty}}</td>
								<td  class="text-center">{{su.rcptSGWQtyIncr||0}}</td>
								<td  class="text-center">{{su.rcptSGQQty}} / {{su.planSGQQty}}</td>
								<td  class="text-center">{{su.rcptSGQQtyIncr||0}}</td>
							</tr>
						</tfoot>
			  </table>
			  <div class="clearboth"></div>
		</div> 
		<!-- endof first tab -->
		<div role="tabpanel" class="tab-pane" ng-class="{'active':temp.showTab==='bitScanItem'}"  ng-if="authUser.UserRole.indexOf('qa')===-1">
			<button type="button" class="btn btn-default pull-right" ng-click="refreshScanList('SGW');setFocus('barcode1')">Refresh BIT Scan List</button>
				<div class="clearboth"></div>
				<form ng-show="bitList&&bitList.length>0" class="margin-top">
						<div class="form-group">
							<div class="input-group">
							<div class="input-group-addon"><i class="fa fa-search"></i></div>
							<input type="text" class="form-control" placeholder="Search item" ng-model="searchItem">
							</div>      
						</div>
					</form>
					<table class="table padding-top table-striped border" >
						<thead> 
							<tr>
								<!-- <td>Line No</td> -->
								<td class="text-center">
								<a class="cursor-pointer" ng-click="sortType = 'SerialNo'; sortReverse = !sortReverse">
								Serials No
								<span ng-show="sortType == 'SerialNo' && !sortReverse" class="fa fa-caret-down"></span>
								<span ng-show="sortType == 'SerialNo' && sortReverse" class="fa fa-caret-up"></span>
								</a>
							</td>
							<td class="text-center">
								<a class="cursor-pointer" ng-click="sortType = 'workorder'; sortReverse = !sortReverse">
								Work Order
								<span ng-show="sortType == 'workorder' && !sortReverse" class="fa fa-caret-down"></span>
								<span ng-show="sortType == 'workorder' && sortReverse" class="fa fa-caret-up"></span>
								</a>
							</td>
							<td class="text-center">
								<a class="cursor-pointer" ng-click="sortType = 'Batch'; sortReverse = !sortReverse">
								Batch
								<span ng-show="sortType == 'Batch' && !sortReverse" class="fa fa-caret-down"></span>
								<span ng-show="sortType == 'Batch' && sortReverse" class="fa fa-caret-up"></span>
								</a>
							</td>
							<td class="text-center">
								<a class="cursor-pointer" ng-click="sortType = 'CreatedBy'; sortReverse = !sortReverse">
								Created By 
								<span ng-show="sortType == 'CreatedBy' && !sortReverse" class="fa fa-caret-down"></span>
								<span ng-show="sortType == 'CreatedBy' && sortReverse" class="fa fa-caret-up"></span>
								</a>
							</td>
							<td class="text-center">
								<a class="cursor-pointer" ng-click="sortType = 'CreatedOn'; sortReverse = !sortReverse">
								Created On
								<span ng-show="sortType == 'CreatedOn' && !sortReverse" class="fa fa-caret-down"></span>
								<span ng-show="sortType == 'CreatedOn' && sortReverse" class="fa fa-caret-up"></span>
								</a>
							</td>
							<td class="text-center">
								<a class="cursor-pointer" ng-click="sortType = 'StatusID'; sortReverse = !sortReverse">
								Status
								<span ng-show="sortType == 'StatusID' && !sortReverse" class="fa fa-caret-down"></span>
								<span ng-show="sortType == 'StatusID' && sortReverse" class="fa fa-caret-up"></span>
								</a>
							</td>
							</tr>
						</thead> 
						<tbody> 
							<tr ng-if="bitList&&bitList.length>0" 
								ng-repeat="(idx,item) in bitList | orderBy:sortType:sortReverse | filter:searchItem">
		
							<td class="text-center" ng-class="{'success':item.StatusID==='6'}">{{item.SerialNo}}</td>
							<td class="text-center" ng-class="{'success':item.StatusID==='6'}">{{item.WorkOrder}}</td>
							<td class="text-center" ng-class="{'success':item.StatusID==='6'}">{{item.batchno}}</td>
							<td class="text-center" ng-class="{'success':item.StatusID==='6'}">{{item.CreatedBy}}</td>
							<td class="text-center" ng-class="{'success':item.StatusID==='6'}">{{item.CreatedOn|date:"dd/MMM/yyyy"}}</td>
							<td class="text-center" ng-class="{'success':item.StatusID==='6'}">{{(item.StatusID==='5')?"pending":"scanned"}}</td>
						</tr>
					
						<tr>
							<td class="text-center" colspan="6" class='empty-message'  ng-show="!bitList||bitList.length==0">No item.</td>
							<td class="text-center" colspan="6" class='empty-message'  ng-show="bitList&&bitList.length>0">Total Quantity: {{bitList.length}}</td>
						</tr>
						</tbody> 
					</table>		
		</div>
				<!-- endof second tab -->
		<div role="tabpanel" class="tab-pane" ng-class="{'active':temp.showTab==='qasScanItem'}"  ng-if="authUser.UserRole.indexOf('wh')===-1">
			<button type="button" class="btn btn-default pull-right" ng-click="refreshScanList('SGQ');setFocus('barcode1')">Refresh QA Sample Scan List</button>
				<h4 class="margin-top">Subcon pending list for return scan</h4>	
				<div class="clearboth"></div>
				<form ng-if="qasList&&qasList.length>0" class="margin-top">
						<div class="form-group">
							<div class="input-group">
							<div class="input-group-addon"><i class="fa fa-search"></i></div>
							<input type="text" class="form-control" placeholder="Search item" ng-model="searchItem">
							</div>      
						</div>
					</form>
					<table class="table padding-top table-striped border" style="max-height: 200px">
						<thead> 
							<tr>
								<!-- <td>Line No</td> -->
								<td class="text-center">
								<a class="cursor-pointer" ng-click="sortType = 'SerialNo'; sortReverse = !sortReverse">
								Serials No
								<span ng-show="sortType == 'SerialNo' && !sortReverse" class="fa fa-caret-down"></span>
								<span ng-show="sortType == 'SerialNo' && sortReverse" class="fa fa-caret-up"></span>
								</a>
							</td>
							<td class="text-center">
								<a class="cursor-pointer" ng-click="sortType = 'workorder'; sortReverse = !sortReverse">
								Work Order
								<span ng-show="sortType == 'workorder' && !sortReverse" class="fa fa-caret-down"></span>
								<span ng-show="sortType == 'workorder' && sortReverse" class="fa fa-caret-up"></span>
								</a>
							</td>
							<td class="text-center">
								<a class="cursor-pointer" ng-click="sortType = 'Batch'; sortReverse = !sortReverse">
								Batch
								<span ng-show="sortType == 'Batch' && !sortReverse" class="fa fa-caret-down"></span>
								<span ng-show="sortType == 'Batch' && sortReverse" class="fa fa-caret-up"></span>
								</a>
							</td>
							<td class="text-center">
								<a class="cursor-pointer" ng-click="sortType = 'CreatedBy'; sortReverse = !sortReverse">
								Created By 
								<span ng-show="sortType == 'CreatedBy' && !sortReverse" class="fa fa-caret-down"></span>
								<span ng-show="sortType == 'CreatedBy' && sortReverse" class="fa fa-caret-up"></span>
								</a>
							</td>
							<td class="text-center">
								<a class="cursor-pointer" ng-click="sortType = 'CreatedOn'; sortReverse = !sortReverse">
								Created On
								<span ng-show="sortType == 'CreatedOn' && !sortReverse" class="fa fa-caret-down"></span>
								<span ng-show="sortType == 'CreatedOn' && sortReverse" class="fa fa-caret-up"></span>
								</a>
							</td>
							<td class="text-center">
								<a class="cursor-pointer" ng-click="sortType = 'StatusID'; sortReverse = !sortReverse">
								Status
								<span ng-show="sortType == 'StatusID' && !sortReverse" class="fa fa-caret-down"></span>
								<span ng-show="sortType == 'StatusID' && sortReverse" class="fa fa-caret-up"></span>
								</a>
							</td>
							</tr>
						</thead> 
						<tbody> 
							<tr ng-if="qasList&&qasList.length>0" 
								ng-repeat="(idx,item) in qasList | orderBy:sortType:sortReverse | filter:searchItem">
		
							<td class="text-center" ng-class="{'success':item.StatusID==='6'}">{{item.SerialNo}}</td>
							<td class="text-center" ng-class="{'success':item.StatusID==='6'}">{{item.WorkOrder}}</td>
							<td class="text-center" ng-class="{'success':item.StatusID==='6'}">{{item.batchno}}</td>
							<td class="text-center" ng-class="{'success':item.StatusID==='6'}">{{item.CreatedBy}}</td>
							<td class="text-center" ng-class="{'success':item.StatusID==='6'}">{{item.CreatedOn|date:"dd/MMM/yyyy"}}</td>
							<td class="text-center" ng-class="{'success':item.StatusID==='6'}">{{(item.StatusID==='5')?"pending":"scanned"}}</td>
						</tr>
					
						<tr>
							<td class="text-center" colspan="6" class='empty-message'  ng-show="!qasList||qasList.length==0">No item.</td>
							<td class="text-center" colspan="6" class='empty-message'  ng-show="qasList&&qasList.length>0">Total Quantity: {{qasList.length}}</td>
						</tr>
						</tbody> 
					</table>		
		</div>
		<!-- endof Third tab -->


</div> <!-- end of tab panes -->

		
	

	<div class="clearboth"></div>
</section>


<div class="clearboth"></div>
<pre ng-if="debug">dorder:{{dorder | json}}</pre>	
<pre ng-if="debug">barcode:{{barcode | json}}</pre>	
<pre ng-if="debug">workOrders:{{workOrders | json}}</pre>	
<pre ng-if="debug">bitList:{{bitList | json}}</pre>	
<pre ng-if="debug">qasList:{{qasList | json}}</pre>	
<pre ng-if="debug">temp:{{temp | json}}</pre>	

